<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WWM - GvG Strategy</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Where Winds Meet - Guild War Strategy</h1>
            <p class="subtitle">Guild vs Guild Battle Map (Max 30 Players) ‚Ä¢ <span class="copyright">Created by Mido from VCross</span></p>
            <button id="themeToggleBtn" class="theme-toggle-btn" title="Toggle Dark/Light Theme">
                <span class="theme-icon">üåô</span>
            </button>
        </header>
        
        <div class="main-content">
            <!-- Member List Panel -->
            <div class="member-panel" id="memberPanel">
                <button class="panel-toggle-btn" id="togglePanelBtn" title="Toggle Panel">
                    <span class="toggle-icon">‚óÄ</span>
                </button>
                <div class="panel-content">
                    <h2>Guild Members <span id="playerCount">(0/30)</span>
                        <button id="managePlayersBtn" class="manage-players-btn" title="Manage Players">‚öôÔ∏è</button>
                    </h2>
                <div class="enemy-section">
                    <button id="addEnemiesBtn" class="add-enemies-btn">
                        ‚öîÔ∏è Add 5 Enemies (<span id="enemyCount">0</span>/30)
                    </button>
                </div>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Search players...">
                </div>
                <div class="view-toggle">
                    <button class="view-toggle-btn active" data-view="grouped">Grouped by Team</button>
                    <button class="view-toggle-btn" data-view="list">All Players</button>
                </div>
                <div class="role-filters">
                    <button class="role-filter-btn active" data-role="all">All Roles</button>
                    <button class="role-filter-btn" data-role="Tank">Tank</button>
                    <button class="role-filter-btn" data-role="DPS">DPS</button>
                    <button class="role-filter-btn" data-role="Healer">Healer</button>
                    <button class="role-filter-btn" data-role="Support">Support</button>
                </div>
                    <div id="memberList" class="member-list"></div>
                </div>
            </div>
            
            <!-- Map Area -->
            <div class="map-panel">
                <h2>Battle Map <span id="placedCount">(0/30 Placed)</span></h2>
                
                <!-- Collapsible Tools Toolbar (Bottom Right) -->
                <div class="sidebar-toolbar sidebar-bottom-right" id="toolsToolbar">
                    <button class="sidebar-toggle-btn" id="toggleToolsBtn" title="Tools">
                        <span class="sidebar-icon">üõ†Ô∏è</span>
                    </button>
                    <div class="sidebar-panel" id="toolsPanel">
                        <div class="sidebar-header">
                            <h3>Tools</h3>
                            <button class="sidebar-close-btn" data-target="toolsPanel">‚úï</button>
                        </div>
                        
                        <!-- Objects Section -->
                        <div class="sidebar-section">
                            <div class="sidebar-section-title">Objects</div>
                            <div class="sidebar-buttons">
                                <button id="addObjectiveBtn" class="sidebar-btn objective-btn" title="Add Objective Marker">
                                    <span class="btn-icon">üéØ</span>
                                    <span class="btn-label">Objective</span>
                                </button>
                                <button id="addBossBtn" class="sidebar-btn boss-btn" title="Add Boss Marker">
                                    <img src="images/boss.png" alt="Boss" class="btn-icon-img">
                                    <span class="btn-label">Boss</span>
                                </button>
                                <button id="addTowerBtn" class="sidebar-btn tower-btn" title="Add Tower Marker">
                                    <img src="images/tower.png" alt="Tower" class="btn-icon-img">
                                    <span class="btn-label">Tower</span>
                                </button>
                                <button id="addTreeBtn" class="sidebar-btn tree-btn" title="Add Tree Marker">
                                    <span class="btn-icon">üå≥</span>
                                    <span class="btn-label">Tree</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="sidebar-divider"></div>
                        
                        <!-- Drawing Section -->
                        <div class="sidebar-section">
                            <div class="sidebar-section-title">Drawing</div>
                            <div class="sidebar-buttons">
                                <button id="drawBtn" class="sidebar-btn draw-btn" title="Toggle Draw Mode">
                                    <span class="btn-icon">‚úèÔ∏è</span>
                                    <span class="btn-label">Draw</span>
                                </button>
                                <button id="undoDrawBtn" class="sidebar-btn undo-btn" title="Undo Drawing" disabled>
                                    <span class="btn-icon">‚Ü∂</span>
                                    <span class="btn-label">Undo</span>
                                </button>
                                <button id="redoDrawBtn" class="sidebar-btn redo-btn" title="Redo Drawing" disabled>
                                    <span class="btn-icon">‚Ü∑</span>
                                    <span class="btn-label">Redo</span>
                                </button>
                                <button id="clearDrawBtn" class="sidebar-btn clear-draw-btn" title="Clear All Drawings">
                                    <span class="btn-icon">üóëÔ∏è</span>
                                    <span class="btn-label">Clear All</span>
                                </button>
                            </div>
                            <div class="sidebar-toggle-option">
                                <label class="toggle-label-small">
                                    <input type="checkbox" id="autoDeleteToggle" />
                                    <span class="toggle-slider-small"></span>
                                    <span class="toggle-text-small">Auto-delete after 10s</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="mapArea" class="map-area">
                    <canvas id="drawingCanvas" class="drawing-canvas"></canvas>
                    <div class="map-placeholder">
                        <p class="instruction">Drag players from the list to place them on the battle map</p>
                    </div>
                </div>
                <div class="map-controls">
                    <button id="clearMapBtn">Clear All Placements</button>
                    <button id="exportBtn">Export Strategy</button>
                    <button id="importBtn">Import Strategy</button>
                    <input type="file" id="importFileInput" accept=".json" style="display: none;">
                </div>
            </div>
        </div>
    </div>
    
    <!-- Player Management Popup -->
    <div id="playerManagementModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Manage Players</h2>
                <button class="modal-close" id="closeModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-toolbar">
                    <button id="addNewPlayerBtn" class="btn-primary">+ Add New Player</button>
                </div>
                <div class="player-management-list" id="playerManagementList">
                    <!-- Players will be rendered here -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Player Edit Form Popup -->
    <div id="playerEditModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2 id="editModalTitle">Add New Player</h2>
                <button class="modal-close" id="closeEditModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="playerEditForm">
                    <input type="hidden" id="editPlayerId" value="">
                    <div class="form-group">
                        <label for="editPlayerName">Name:</label>
                        <input type="text" id="editPlayerName" required maxlength="50">
                    </div>
                    <div class="form-group">
                        <label for="editPlayerRole">Role:</label>
                        <select id="editPlayerRole" required>
                            <option value="Tank">Tank</option>
                            <option value="DPS">DPS</option>
                            <option value="Healer">Healer</option>
                            <option value="Support">Support</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editPlayerTeam">Team:</label>
                        <select id="editPlayerTeam" required>
                            <option value="FrontLine">FrontLine</option>
                            <option value="Jungle">Jungle</option>
                            <option value="Defence 1">Defence 1</option>
                            <option value="Defence 2">Defence 2</option>
                            <option value="Backline 1">Backline 1</option>
                            <option value="Backline 2">Backline 2</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editPlayerWeapon1">Weapon 1:</label>
                        <select id="editPlayerWeapon1" required>
                            <option value="Nameless Sword">Nameless Sword</option>
                            <option value="Nameless Spear">Nameless Spear</option>
                            <option value="Stormbreaker Spear">Stormbreaker Spear</option>
                            <option value="Thundercry Blade">Thundercry Blade</option>
                            <option value="Infernal Twinblades">Infernal Twinblades</option>
                            <option value="Mortal Rope Dart">Mortal Rope Dart</option>
                            <option value="Vernal Umbrella">Vernal Umbrella</option>
                            <option value="Inkwell Fan">Inkwell Fan</option>
                            <option value="Panacea Fan">Panacea Fan</option>
                            <option value="Soulshade Umbrella">Soulshade Umbrella</option>
                            <option value="Heavenquaker Spear">Heavenquaker Spear</option>
                            <option value="Strategic Sword">Strategic Sword</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editPlayerWeapon2">Weapon 2:</label>
                        <select id="editPlayerWeapon2" required>
                            <option value="Nameless Sword">Nameless Sword</option>
                            <option value="Nameless Spear">Nameless Spear</option>
                            <option value="Stormbreaker Spear">Stormbreaker Spear</option>
                            <option value="Thundercry Blade">Thundercry Blade</option>
                            <option value="Infernal Twinblades">Infernal Twinblades</option>
                            <option value="Mortal Rope Dart">Mortal Rope Dart</option>
                            <option value="Vernal Umbrella">Vernal Umbrella</option>
                            <option value="Inkwell Fan">Inkwell Fan</option>
                            <option value="Panacea Fan">Panacea Fan</option>
                            <option value="Soulshade Umbrella">Soulshade Umbrella</option>
                            <option value="Heavenquaker Spear">Heavenquaker Spear</option>
                            <option value="Strategic Sword">Strategic Sword</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancelEditBtn">Cancel</button>
                        <button type="submit" class="btn-primary">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2 id="confirmModalTitle">Confirm Action</h2>
            </div>
            <div class="modal-body">
                <p id="confirmModalMessage"></p>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="confirmCancelBtn">Cancel</button>
                <button class="btn-danger" id="confirmOkBtn">Confirm</button>
            </div>
        </div>
    </div>
    
    <script src="data.js"></script>
    <script src="app.js"></script>
    
    <footer class="copyright-footer">
        <p>¬© 2026 Mido from VCross</p>
    </footer>
</body>
</html>
